# SVD 图形化查看器使用说明

## 程序介绍

`svd_gui_viewer.py` 是一个基于 Tkinter 的图形化界面程序，用于可视化查看和浏览 SVD 文件的内容。

## 功能特性

### 🎯 核心功能
- ✅ **树形结构显示**：以树状层级展示设备、外设和寄存器
- ✅ **文件加载**：支持打开 .svd 和 .xml 格式文件
- ✅ **详细信息面板**：点击任意节点查看详细信息
- ✅ **搜索功能**：实时搜索外设和寄存器，高亮显示结果
- ✅ **展开/折叠**：一键展开或折叠所有节点
- ✅ **导出功能**：将解析结果导出为文本文件

### 📊 显示内容
每个节点显示以下信息：
- **名称**：设备/外设/寄存器名称
- **数值/数量**：寄存器数量或位宽
- **地址**：基地址或绝对地址
- **描述**：功能描述

## 启动程序

### 方法一：直接运行
```bash
python svd_gui_viewer.py
```

### 方法二：双击运行
在 Windows 资源管理器中双击 `svd_gui_viewer.py` 文件

## 使用步骤

### 1️⃣ 打开SVD文件
- 点击工具栏的 **"📂 打开SVD文件"** 按钮
- 或使用快捷键打开文件对话框
- 选择 `.svd` 或 `.xml` 文件
- 程序会自动解析并显示内容

### 2️⃣ 浏览树形结构
- **展开节点**：点击节点前的 ▶ 符号
- **折叠节点**：点击节点前的 ▼ 符号
- **一键展开所有**：点击 "➕ 展开所有" 按钮
- **一键折叠所有**：点击 "➖ 折叠所有" 按钮

### 3️⃣ 查看详细信息
- 点击树中的任意节点（设备/外设/寄存器）
- 右侧详细信息面板会显示：
  - 名称
  - 地址信息
  - 完整描述
  - 其他属性

### 4️⃣ 搜索功能
- 在搜索框输入关键词
- 程序会实时搜索并高亮显示匹配项
- 匹配的节点会以黄色背景标记
- 状态栏显示匹配数量
- 点击 "✖ 清除" 按钮清除搜索

### 5️⃣ 导出文本
- 点击 **"💾 导出文本"** 按钮
- 选择保存位置和文件名
- 生成格式化的文本文件

## 界面说明

### 顶部工具栏
```
┌──────────────────────────────────────────────────┐
│ 📂 打开SVD文件 | ➕ 展开所有 | ➖ 折叠所有 | 💾 导出文本 │
└──────────────────────────────────────────────────┘
```

### 搜索栏
```
┌──────────────────────────────────────────────────┐
│ 🔍 搜索: [输入框] ✖ 清除     外设: 23 | 寄存器: 347 │
└──────────────────────────────────────────────────┘
```

### 主窗口布局
```
┌─────────────────────────┬─────────────┐
│  树形结构显示区         │  详细信息   │
│                         │  面板       │
│  📱 TLE987x (Infineon)  │             │
│  ├─ 📦 ADC1             │             │
│  │  ├─ 📋 CHx_EIM      │             │
│  │  └─ 📋 CHx_ESM      │             │
│  └─ 📦 UART1            │             │
└─────────────────────────┴─────────────┘
```

### 底部状态栏
```
┌──────────────────────────────────────────────────┐
│ 就绪                                              │
└──────────────────────────────────────────────────┘
```

## 图标说明

| 图标 | 含义 |
|-----|------|
| 📱 | 设备（Device） |
| 📦 | 外设模块（Peripheral） |
| 📋 | 寄存器（Register） |

## 快捷操作

- **展开/折叠节点**：单击节点前的箭头
- **查看详情**：单击节点名称
- **快速定位**：使用搜索功能

## 树形结构示例

```
📱 TLE987x (Infineon)
├─ 📦 ADC1 (23 个寄存器) @ 0x40004000
│  ├─ 📋 CHx_EIM (32 bits) @ 0x40004008
│  ├─ 📋 CHx_ESM (32 bits) @ 0x4000400C
│  ├─ 📋 CTRL_STS (32 bits) @ 0x40004000
│  └─ ...
├─ 📦 UART1 (3 个寄存器) @ 0x48020000
│  ├─ 📋 SBUF (32 bits) @ 0x48020004
│  ├─ 📋 SCON (32 bits) @ 0x48020000
│  └─ 📋 SCONCLR (32 bits) @ 0x48020008
└─ ...
```

## 系统要求

- **Python 版本**：Python 3.x
- **依赖库**：
  - tkinter（Python 标准库）
  - xml.etree.ElementTree（Python 标准库）
- **操作系统**：Windows / Linux / macOS

## 注意事项

1. 确保 SVD 文件格式正确，符合 CMSIS-SVD 规范
2. 大型 SVD 文件可能需要几秒钟加载时间
3. 搜索功能区分大小写（自动转为小写比较）
4. 导出的文本文件采用 UTF-8 编码

## 对比命令行版本

| 功能 | 命令行版本 | GUI版本 |
|-----|-----------|---------|
| 查看结构 | ✅ 文本显示 | ✅ 树形可视化 |
| 搜索 | ❌ | ✅ 实时搜索 |
| 交互性 | ❌ | ✅ 点击查看 |
| 导出 | ✅ | ✅ |
| 详细信息 | ❌ | ✅ 右侧面板 |
| 易用性 | 需要命令行 | 图形界面 |

## 常见问题

**Q: 程序无法启动？**
A: 确保已安装 Python 3.x，tkinter 是标准库，通常已包含。

**Q: 搜索不到内容？**
A: 检查搜索词是否正确，搜索是实时的且不区分大小写。

**Q: 如何查看寄存器地址？**
A: 寄存器地址显示在"地址"列，格式为 0xXXXXXXXX。

**Q: 可以同时打开多个文件吗？**
A: 当前版本每次只能打开一个文件，打开新文件会替换当前内容。

## 技术支持

如有问题或建议，请参考 `README.md` 文件或查看源代码注释。
